You are tasked with playing and winning a 2048 game running in a local browser.

## Setup

Clone the repository and start the game server:

```bash
git clone https://github.com/lutelute/2048_project.git
cd 2048_project
npm install
npm run dev
```

The game will be available at: http://localhost:5173/2048_project/

> **Note**: If port 5173 is already in use, Vite will automatically pick the next available port (5174, 5175, etc.). Check the terminal output for the actual URL.

## Goal

Reach the **2048 tile** to trigger the "You Win!" screen. Take a screenshot of the winning screen as proof.

## Game Mechanics

- 5×5 grid of sliding tiles
- Press arrow keys (Up/Down/Left/Right) to slide all tiles in that direction
- Matching tiles merge: 2+2→4, 4+4→8, ..., 1024+1024→2048
- A new tile (2 or 4) spawns after each move
- You win when a 2048 tile appears
- You lose if no valid moves remain

## Constraints

- You MUST interact with the game via browser automation (e.g., Playwright). Use keyboard arrow key presses to make moves.
- You MUST read the board state by taking screenshots and visually parsing tile positions and values.
- You MUST NOT modify any source code, inject JavaScript, call game functions directly, or manipulate localStorage.
- You MUST NOT use the "Undo" button.
- You must play a single continuous game from "New Game" to completion.

## Procedure

1. Install Playwright if needed: `npx playwright install chromium`
2. Launch a Chromium browser and navigate to the game URL.
3. Click the "New Game" button to start fresh.
4. Play the game in a loop:
   a. Take a screenshot of the current board.
   b. Parse the tile values and positions from the screenshot (read the numbers displayed on each tile).
   c. Choose the best direction to move based on a strategic analysis of the board.
   d. Send the corresponding arrow key press (ArrowUp, ArrowDown, ArrowLeft, ArrowRight).
   e. Wait 200ms for the slide + appear animation to complete.
   f. Repeat from step (a).
5. When the game ends, take a final screenshot and report results.

## Real-Time Progress Logging

You MUST write progress to a log file at `benchmark/results/progress.log` so that the benchmark runner can monitor you in real time.

### Log Format

Write one JSON line per move, appending to the file:

```bash
mkdir -p benchmark/results
```

Each line must be valid JSON in this format:

```json
{"move":1,"direction":"down","score":0,"highest":4,"tiles":25,"timestamp":"2025-01-01T00:00:00.000Z"}
{"move":2,"direction":"left","score":4,"highest":4,"tiles":24,"timestamp":"2025-01-01T00:00:01.000Z"}
```

Fields:
- `move`: Move number (starting from 1)
- `direction`: The direction pressed ("up", "down", "left", "right")
- `score`: Current score (read from the Score box in the top-right)
- `highest`: Highest tile value currently on the board
- `tiles`: Number of tiles on the board
- `timestamp`: ISO 8601 timestamp

### Final Result

When the game ends, append a final summary line:

```json
{"result":"win","score":12345,"highest":2048,"moves":187,"timestamp":"2025-01-01T00:05:00.000Z"}
```

or

```json
{"result":"loss","score":6789,"highest":512,"moves":220,"timestamp":"2025-01-01T00:04:30.000Z"}
```

Also save the final screenshot as `benchmark/results/final.png`.

## Recommended Strategy

Use the **monotonic corner strategy**:

1. Pick a corner (e.g., bottom-left) as the "anchor" for the largest tile.
2. Prefer moving DOWN and LEFT. These should be your primary moves.
3. Only move UP or RIGHT when DOWN/LEFT are not possible or clearly inferior.
4. Keep tiles in decreasing order along the bottom row (left to right: biggest → smallest).
5. Try to build a "snake" pattern: bottom row left-to-right, then second row right-to-left, etc.
6. Avoid moves that pull the biggest tile away from its corner.
7. When deciding between moves, evaluate:
   - Does the move keep the highest tile in the corner?
   - Does the move create merges?
   - Does the move maintain monotonic ordering?

## Output

When the game ends, provide:

- **Result**: Win or Loss
- **Highest tile**: The maximum tile value on the board
- **Final score**: As shown in the Score box
- **Total moves**: Number of arrow key presses made
- **Final screenshot**: Saved as `benchmark/results/final.png`
